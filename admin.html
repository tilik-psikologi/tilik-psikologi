<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard | Tilik Psikologi</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900">
    <header class="bg-blue-900 text-white p-6 shadow-md">
        <h1 class="text-xl font-bold">Hasil Asesmen Tilik Psikologi</h1>
        <p class="text-xs opacity-70">Admin: Rafael Ramadhan | Univ. Yudharta Pasuruan</p>
    </header>

    <main class="p-8">
        <div class="bg-white rounded-xl shadow-sm border overflow-hidden">
            <table class="w-full text-left">
                <thead class="bg-slate-100 text-xs font-bold uppercase text-slate-500">
                    <tr>
                        <th class="p-4">Nama Peserta</th>
                        <th class="p-4">Tes</th>
                        <th class="p-4 text-center">Skor</th>
                        <th class="p-4 text-right">Waktu</th>
                    </tr>
                </thead>
                <tbody id="data-display" class="divide-y text-sm">
                    <tr><td colspan="4" class="p-10 text-center italic">Memuat data dari Firebase...</td></tr>
                </tbody>
            </table>
        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // KREDENSI DARI SCREENSHOT (159)
        const firebaseConfig = {
            apiKey: "AIzaSyBZsXx_T5-5bKp14BLhuZGNfj4Ils71nVA",
            authDomain: "tilikpsikologi-cbt.firebaseapp.com",
            projectId: "tilikpsikologi-cbt",
            storageBucket: "tilikpsikologi-cbt.firebasestorage.app",
            messagingSenderId: "940142802410",
            appId: "1:940142802410:web:5e6579568ed2774d9a2e93",
            measurementId: "G-X9KM4DEJJK"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const q = query(collection(db, "hasil_tes"), orderBy("waktu", "desc"));

        onSnapshot(q, (snapshot) => {
            const tableBody = document.getElementById('data-display');
            tableBody.innerHTML = "";
            snapshot.forEach((doc) => {
                const d = doc.data();
                tableBody.innerHTML += `
                    <tr class="hover:bg-blue-50">
                        <td class="p-4 font-bold text-blue-900">${d.nama || 'Anonim'}</td>
                        <td class="p-4"><span class="bg-slate-200 px-2 py-0.5 rounded text-[10px]">${d.tes || '-'}</span></td>
                        <td class="p-4 text-center font-black">${d.skor || '0'}</td>
                        <td class="p-4 text-right text-slate-400 text-xs">${d.waktu || '-'}</td>
                    </tr>`;
            });
        });
    </script>
</body>
</html>
